(this["webpackJsonpacorn-react"]=this["webpackJsonpacorn-react"]||[]).push([[29],{119:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(4),r=a.n(n),l=a(11),i=a(172),s=a.n(i),o=a(31),d=(a(161),a(397)),j=a(177),p=a(163),u=a(178),b=a(174),h=a(396),m=a(160),O=a(159),x=a(182),v=a(168),f=a(8);const C=[{value:"CSC/19/3558",label:"CSC/19/3558- Adeola James Uche - Computer Science"},{value:"FPA/CS/07-0044",label:"FPA/CS/07-0044, Adeola James Uche- Electrical Electronic Engineering"}],g=[{value:"Nigeria",label:"Nigeria"},{value:"USA",label:"USA"}],S=[{value:"Lagos",label:"Lagos"},{value:"Oyo",label:"Oyo"},{value:"Ondo",label:"Ondo"},{value:"Ekiti",label:"Ekiti"},{value:"Kano",label:"Kano"},{value:"Abuja",label:"FCT"}],y=(new Date).getFullYear(),N=[];for(let A=1960;A<=y;A+=1)N.push({value:A,label:A});t.default=()=>{const e=!!s.a.get("auth"),t=Object(l.g)();if(!e)return t("/login"),null;const[a,n]=Object(c.useState)(!1),[i,y]=Object(c.useState)(),[A,E]=Object(c.useState)(),[P,R]=Object(c.useState)(),[k,w]=Object(c.useState)(""),[L,F]=Object(c.useState)([]),[T,U]=Object(c.useState)(!0),[_,q]=Object(c.useState)(null),D=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://18.206.125.147:8000/api/v1/"}).REACT_APP_BASE_URL_EXT,[I,B]=Object(c.useState)(null),[z,$]=Object(c.useState)([]),[H,J]=Object(c.useState)([]),[K,V]=Object(c.useState)(),[W,Y]=Object(c.useState)([]),G=JSON.parse(localStorage.getItem("userDetails")),[M,X]=Object(c.useState)(""),[Q,Z]=Object(c.useState)(""),[ee,te]=Object(c.useState)(""),[ae,ce]=Object(c.useState)(""),[ne,re]=Object(c.useState)(""),[le,ie]=Object(c.useState)(""),[se,oe]=Object(c.useState)(""),[de,je]=Object(c.useState)(""),[pe,ue]=Object(c.useState)(""),[be,he]=Object(c.useState)(""),[me,Oe]=Object(c.useState)(""),[xe,ve]=Object(c.useState)(""),[fe,Ce]=Object(c.useState)(""),ge=m.b().shape({matricnos:m.d().required("Applicant Information is required"),recepient:m.d().required("Recepient/Organization is required"),recepientAddress:m.d().required("Address is required"),recepientPhone:m.d().required("Phone is required"),recepientEmail:m.d().email().required("Email is required"),recepientCountry:m.d().required("Country is required"),recepientState:m.d().required("State is required")}),Se={matricnos:se,recepient:"",recepientAddress:"",recepientPhone:"",recepientEmail:"",recepientCountry:"",recepientState:fe},ye=Object(O.a)({initialValues:Se,validationSchema:ge,onSubmit:e=>{t.push("/transcriptpay",{appInfo:e})}}),{handleSubmit:Ne,handleChange:Ae,values:Ee,touched:Pe,errors:Re,setFieldValue:ke}=ye,we=e=>{ke("recepientCountry",e.value),y(e)},Le={"Content-Type":"application/json",Authorization:`Token ${G.token}`};console.log(Le);Object(c.useEffect)((()=>{(async()=>{try{const e=await fetch(`${D}fetchschools`);if(!e.ok)throw new Error(`Failed to fetch. Status code: ${e.statuscode}`);const t=(await e.json()).data.map((e=>({value:e.userID,label:e.name})));F(t)}catch(e){q(e.message)}finally{U(!1)}})()}),[]);return Object(f.jsxs)("section",{className:"scroll-section",id:"sizing",children:[Object(f.jsx)("h2",{className:"small-title",children:"Transcript Application"}),Object(f.jsx)(d.a,{id:"loginForm",className:"tooltip-end-bottom",onSubmit:Ne,children:Object(f.jsxs)(j.a,{children:[Object(f.jsx)(p.a,{xs:"12",sm:"6",children:Object(f.jsx)(u.a,{className:"mb-5",children:Object(f.jsx)(u.a.Body,{children:Object(f.jsxs)(j.a,{className:"mb-3 g-3",children:[Object(f.jsx)(p.a,{md:"12",children:Object(f.jsxs)("div",{className:"mb-3 filled form-group tooltip-end-top",children:[Object(f.jsxs)(d.a.Label,{children:["School Profile ",Object(f.jsx)("span",{style:{color:"red"},onClick:()=>n(!0),children:"  (Information Not Found, Click to Create School Profile)"})]}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",name:"matricnos",options:C,placeholder:"Select your  school profile",onChange:e=>{ke("matricnos",e.value),R(e)}}),Re.matricnos&&Pe.matricnos&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.matricnos})]})}),Object(f.jsx)(p.a,{md:"12",children:Object(f.jsxs)("div",{className:"mb-3 filled form-group tooltip-end-top",children:[Object(f.jsx)(d.a.Label,{children:"Recepient Organization"}),Object(f.jsx)(d.a.Control,{type:"text",name:"recepient",placeholder:"Recepient organization",value:Ee.recepient,onChange:Ae}),Re.recepient&&Pe.recepient&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.recepient})]})}),Object(f.jsx)(p.a,{md:"6",children:Object(f.jsxs)("div",{className:"mb-3 filled form-group tooltip-end-top",children:[Object(f.jsx)(d.a.Label,{children:"Recepient Email"}),Object(f.jsx)(d.a.Control,{type:"text",name:"recepientEmail",placeholder:"Email",value:Ee.recepientEmail,onChange:Ae}),Re.recepientEmail&&Pe.recepientEmail&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.recepientEmail})]})}),Object(f.jsx)(p.a,{md:"6",children:Object(f.jsxs)("div",{className:"mb-3 filled form-group tooltip-end-top",children:[Object(f.jsx)(d.a.Label,{children:"Recepient Phone"}),Object(f.jsx)(d.a.Control,{type:"text",name:"recepientPhone",placeholder:"Contact Phone",value:Ee.recepientPhone,onChange:Ae}),Re.recepientPhone&&Pe.recepientPhone&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.recepientPhone})]})}),Object(f.jsx)(p.a,{xs:"12",children:Object(f.jsxs)("div",{className:"mb-3 filled form-group tooltip-end-top",children:[Object(f.jsx)(d.a.Label,{children:"Receipent Address "}),Object(f.jsx)(d.a.Control,{as:"textarea",name:"recepientAddress",placeholder:"Receipent Address",value:Ee.recepientAddress,onChange:Ae}),Re.recepientAddress&&Pe.recepientAddress&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.recepientAddress})]})}),Object(f.jsx)(p.a,{md:"6",children:Object(f.jsxs)("div",{className:"mb-3 filled form-group tooltip-end-top",children:[Object(f.jsx)(d.a.Label,{children:"Recepient Country"}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",name:"recepientCountry",value:i,options:g,onChange:we,placeholder:"Receipent Country"}),Re.recepientCountry&&Pe.recepientCountry&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.recepientCountry})]})}),Object(f.jsx)(p.a,{md:"6",children:Object(f.jsxs)("div",{className:"mb-3 filled form-group tooltip-end-top",children:[Object(f.jsx)(d.a.Label,{children:"Recepient State"}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",name:"recepientState",options:S,value:A,placeholder:"Receipent State",onChange:e=>{ke("recepientState",e.value),E(e)}}),Re.recepientState&&Pe.recepientState&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.recepientState})]})})]})})})}),Object(f.jsx)(p.a,{xs:"12",sm:"6",children:Object(f.jsx)(u.a,{className:"mb-5",children:Object(f.jsxs)(u.a.Body,{children:[Object(f.jsx)(u.a.Title,{children:"Applicant Information"}),Object(f.jsx)(u.a.Text,{children:Object(f.jsx)("span",{style:{color:"red"},children:"Please provide your personal information below"})}),Object(f.jsx)(p.a,{xs:"12",children:Object(f.jsxs)("div",{className:"mb-3 filled form-group tooltip-end-top",children:[Object(f.jsx)(d.a.Label,{children:"Residential Address "}),Object(f.jsx)(d.a.Control,{as:"textarea",name:"recepientAddress",placeholder:"Receipent Address",value:Ee.recepientAddress,onChange:Ae}),Re.recepientAddress&&Pe.recepientAddress&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.recepientAddress})]})}),Object(f.jsx)(p.a,{md:"12",children:Object(f.jsxs)("div",{className:"mb-3 filled form-group tooltip-end-top",children:[Object(f.jsx)(d.a.Label,{children:"Residential Country"}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",name:"recepientCountry",value:i,options:g,onChange:we,placeholder:"Receipent Country"}),Re.recepientCountry&&Pe.recepientCountry&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.recepientCountry})]})}),Object(f.jsx)("div",{className:"mb-5",style:{display:"flex"},children:Object(f.jsx)(b.a,{size:"lg",type:"submit",style:{marginRight:"100px"},children:"Apply Now"})})]})})})]})}),Object(f.jsxs)(h.a,{className:"scroll-out",show:a,onHide:()=>n(!1),scrollable:!0,centered:!0,dialogClassName:"long",children:[Object(f.jsx)(h.a.Header,{closeButton:!0,children:Object(f.jsx)(h.a.Title,{children:"Create/Update School Profile"})}),Object(f.jsx)(h.a.Body,{children:Object(f.jsx)(v.a,{options:{overflowBehavior:{x:"hidden",y:"scroll"}},className:"scroll-track-visible",children:Object(f.jsxs)(j.a,{className:"g-3",children:[Object(f.jsxs)(p.a,{md:"6",children:[Object(f.jsx)(d.a.Label,{children:"Matriculation No."}),Object(f.jsx)(d.a.Control,{type:"text",id:"matricno",name:"matricno",onChange:e=>{w(e.target.value)},value:k})]}),Object(f.jsxs)(p.a,{md:"6",children:[Object(f.jsx)(d.a.Label,{children:"Surname"}),Object(f.jsx)(d.a.Control,{type:"text",name:"surname",placeholder:"Enter lastname",onChange:e=>{Z(e.target.value)},value:Q})]}),Object(f.jsxs)(p.a,{md:"6",children:[Object(f.jsx)(d.a.Label,{children:"Firstname"}),Object(f.jsx)(d.a.Control,{type:"text",name:"firstname",placeholder:"First Name",onChange:e=>{X(e.target.value)},value:M})]}),Object(f.jsxs)(p.a,{md:"6",children:[Object(f.jsx)(d.a.Label,{children:"Othername"}),Object(f.jsx)(d.a.Control,{type:"text",name:"othername",placeholder:"Other name",onChange:e=>{te(e.target.value)},value:ee})]}),Object(f.jsxs)(p.a,{md:"12",children:[Object(f.jsx)(d.a.Label,{children:"School"}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",className:"custom-react-select",name:"school",value:I,options:L,onChange:e=>{B(e),(async e=>{try{U(!0);const t=await fetch(`${D}savedepartment/${e}`);if(!t.ok)throw new Error(`Failed to fetch departments. Status code: ${t.status}`);const a=(await t.json()).data.map((e=>({value:e.id,label:e.department})));$(a)}catch(t){q(t.message)}finally{U(!1)}})(e.value)},placeholder:"School"}),Re.school&&Pe.school&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.school})]}),Object(f.jsxs)(p.a,{md:"12",children:[Object(f.jsx)(d.a.Label,{children:"Department"}),Object(f.jsx)(x.a,{name:"department",value:H,options:z,onChange:e=>{ke("department",e.value),J(e)},placeholder:"Department"}),Re.department&&Pe.department&&Object(f.jsx)("div",{className:"d-block invalid-tooltip",children:Re.department})]}),Object(f.jsxs)(p.a,{md:"12",children:[Object(f.jsx)(d.a.Label,{children:"Course Studied"}),Object(f.jsx)(d.a.Control,{type:"text",name:"courseStudied",placeholder:"Course Studied",onChange:e=>{ie(e.target.value)},value:le})]}),Object(f.jsxs)(p.a,{md:"6",children:[Object(f.jsx)(d.a.Label,{children:"Year of Graduation"}),Object(f.jsx)(x.a,{options:N,name:"gyears",value:K,onChange:e=>{ke("graduationyear",e.value),V(e)},className:"custom-react-select",required:!0})]})]})})}),Object(f.jsxs)(h.a.Footer,{children:[Object(f.jsx)(b.a,{variant:"danger",onClick:()=>n(!1),children:"Close"}),Object(f.jsx)(b.a,{onClick:async e=>{e.preventDefault();const t={matricno:k,surname:Q,firstname:M,othername:ee,school:null===I||void 0===I?void 0:I.value,department:null===H||void 0===H?void 0:H.value,courseStudied:le};try{U(!0);const e=await r.a.post("http://18.206.125.147:8000/api/v1/transcript",t,{headers:Le});console.log(e);const{statuscode:a,message:c}=e.data;0===a?o.c.success(c):1===a?o.c.error(c):o.c.warning("Unexpected status code. Please try again.")}catch(a){a?(console.log("Error:",a.response),o.c.error("Failed to submit. Please check your inputs or try again later.")):(console.error("Unexpected error:",_),o.c.error("An unexpected error occurred."))}finally{U(!1)}},children:"Add Info"})]})]})]})}},161:function(e,t,a){},172:function(e,t,a){e.exports=function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)e[c]=a[c]}return e}function t(a,c){function n(t,n,r){if("undefined"!==typeof document){"number"===typeof(r=e({},c,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var i in r)r[i]&&(l+="; "+i,!0!==r[i]&&(l+="="+r[i].split(";")[0]));return document.cookie=t+"="+a.write(n,t)+l}}function r(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],c={},n=0;n<t.length;n++){var r=t[n].split("="),l=r.slice(1).join("=");try{var i=decodeURIComponent(r[0]);if(c[i]=a.read(l,i),e===i)break}catch(s){}}return e?c[e]:c}}return Object.create({set:n,get:r,remove:function(t,a){n(t,"",e({},a,{expires:-1}))},withAttributes:function(a){return t(this.converter,e({},this.attributes,a))},withConverter:function(a){return t(e({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(c)},converter:{value:Object.freeze(a)}})}return t({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()}}]);